# Telegram Bot для Levi's - Система Скидок

Telegram бот на aiogram 3 для сбора заявок на скидку 30% в магазин Levi's.

## Функционал

- ✅ Запрос имени и номера телефона (автоматически через Telegram или вручную)
- ✅ Отправка поздравительного сообщения с изображением
- ✅ Автоматическая отправка заявки в канал админов
- ✅ Сохранение данных в Google Таблицы

## Установка и настройка

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 2. Настройка бота

Отредактируйте файл `bot.py` и замените следующие параметры:

```python
# Токен бота от @BotFather
BOT_TOKEN = "YOUR_BOT_TOKEN_HERE"

# ID канала админов (с минусом для каналов)
ADMIN_CHANNEL_ID = "YOUR_ADMIN_CHANNEL_ID"

# ID Google таблицы
GOOGLE_SHEET_ID = "YOUR_GOOGLE_SHEET_ID"
```

### 3. Настройка Google Таблиц

1. Перейдите в [Google Cloud Console](https://console.cloud.google.com/)
2. Создайте новый проект или выберите существующий
3. Включите Google Sheets API и Google Drive API
4. Создайте Service Account:
   - Перейдите в IAM & Admin → Service Accounts
   - Нажмите "Create Service Account"
   - Заполните название и описание
   - Создайте ключ в формате JSON
5. Сохраните JSON файл как `google_credentials.json` в папке с ботом
6. Создайте Google Таблицу и предоставьте доступ Service Account (email из JSON файла)
7. Скопируйте ID таблицы из URL

### 4. Настройка канала админов

1. Создайте канал в Telegram
2. Добавьте бота в канал как администратора
3. Получите ID канала (начинается с минуса)
4. Укажите ID в настройках бота

### 5. Добавление изображения

Поместите изображение `congratulations_image.png` в папку с ботом для поздравительного сообщения.

## Запуск

```bash
python bot.py
```

## Структура проекта

```
├── bot.py                    # Основной файл бота
├── requirements.txt          # Зависимости Python
├── google_credentials.json   # Ключи Google Service Account (создать самостоятельно)
├── congratulations_image.png # Изображение для поздравления (добавить самостоятельно)
└── README.md                # Инструкции по установке
```

## Использование

1. Пользователь отправляет `/start`
2. Бот запрашивает имя
3. Бот запрашивает номер телефона (автоматически или вручную)
4. Бот отправляет поздравление с изображением
5. Данные сохраняются в Google Таблицы
6. Заявка отправляется в канал админов

## Особенности

- **Валидация данных**: Проверка корректности имени и номера телефона
- **Автоматический контакт**: Возможность поделиться номером через Telegram
- **HTML разметка**: Красивое оформление сообщений
- **Логирование**: Отслеживание ошибок и событий
- **FSM**: Машина состояний для пошагового сбора данных

## Администрирование

Заявки в канале админов содержат:
- Имя пользователя
- Номер телефона  
- Username Telegram
- User ID
- Ссылку на профиль
- Дату и время подачи заявки

## Требования

- Python 3.8+
- Токен Telegram бота
- Google Service Account с доступом к Sheets API
- Канал или группа для админов
